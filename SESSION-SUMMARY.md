# 프로젝트 논의 요약 (2026-02-12~13)

## 논의 경과

### 출발점: Cafe24 PRO + 카카오톡 AI 챗봇
- 원래 Cafe24 PRO 모노레포(`00.caffe24/`) 안에서 카카오톡 챗봇을 만들려 했음
- PRO의 멀티채널 CS와 연동하여 고객 관리를 통합하려는 목적

### 첫 번째 보류 이유 (PRO + 카톡 조합의 한계)
- 마켓플레이스(쿠팡/네이버) 주문은 050 가상번호 → 카카오 싱크 실제 전화번호와 매칭 불가
- 주문 기반 CS(배송조회, 환불 등)로 확장이 안 됨
- PRO 대시보드 + 챗봇 대시보드 = 이중 운영 부담
- 채널톡(Channel Talk) 같은 상용 앱으로도 충분

### 방향 전환: "고객 관리/커뮤니티"
- 주문 매칭이 아니라, 제품을 산 고객들을 한군데서 관리하고 싶다는 니즈
- 커뮤니티보다는 고객 관리/알림에 집중 (생활용품이라 커뮤니티 주제가 적음)
- 커뮤니티는 나중에 추가 (카톡 알림으로 유입)

### 핵심 발견: "지식 베이스" 필요성
- 사용방법 문의가 가장 많을 것
- 대화를 모아서 자동으로 FAQ 만들고, 다른 사용자 문의에 자동 제안
- 멀티채널(카톡 + 마켓플레이스) 문의를 분석해서 지식 축적
- **고객-주문 매칭은 필요 없음** → 가상번호 문제 무관

### 기존 PRO 코드 분석
- 백엔드: AI 응답 제안, 감정 분석, FAQ 생성 등 실제 구현됨
- BUT "지식 축적" 개념이 없음 (매번 AI가 새로 생성, 일회성)
- 마켓플레이스 문의 수집 API도 미구현 (프레임워크만 있음)
- **기존 프로젝트는 폐기 예정** → 새로 시작

### 채널톡(Channel Talk) 검토
- 채널톡 ALF AI: 자체 도큐먼트 기반 RAG는 되지만, 외부 지식 베이스 연결 안 됨
- Cafe24 PRO와의 직접 연동도 없음
- 결론: 채널톡은 안 씀

### 마켓플레이스 API 확인
- 쿠팡: 고객문의 조회/답변 API **있음**
- 네이버 스마트스토어: 상품문의 조회/답변 API **있음**
- 와디즈: 공개 API **없음** (수동 입력 or 문의 필요)

## 최종 결정된 방향

### 독립 프로젝트 (`kb-chatbot/`)
- Cafe24 PRO 모노레포와 완전 분리
- CF Workers 기반 서버리스

### 만들 것
1. **지식 베이스 엔진** — pgvector + OpenAI 임베딩, 벡터 검색
   - 원본 + AI 정제본 이중 저장
   - 자동 생성 → 운영자 컨펌 → 등록
2. **카카오 오픈빌더 스킬 서버** — CF Workers
   - 지식 베이스 검색 → 자동 답변
   - 못 찾으면 상담사 연결
3. **운영자 대시보드** — CF Pages
   - 지식 관리, 상담 내역, 고객 관리, 멀티유저
4. **마켓플레이스 문의 수집** — 쿠팡/네이버 API

### 고객 유입 흐름
```
제품 구매 (어느 마켓이든)
  → 제품 박스/안내서에 카카오톡 채널 QR
  → 채널 추가 + 문의
  → 지식 베이스 자동 답변
  → 해결된 문의 → 지식 축적
```

### 기술 스택
- Runtime: Cloudflare Workers
- Vector DB: pgvector (Neon PostgreSQL 등)
- Embedding: OpenAI text-embedding-3-small
- AI: OpenAI GPT-4
- Chatbot: 카카오 i 오픈빌더 스킬 서버
- Dashboard: CF Pages
- DB: TBD (D1 or Neon)

## 아직 정하지 않은 것
- DB 선택: Cloudflare D1 vs Neon PostgreSQL (pgvector 필요하면 Neon)
- 대시보드 프레임워크 (Next.js? SvelteKit? etc.)
- 카카오 비즈니스 심사 결과 대기 중
- 와디즈 API 존재 여부 (문의 필요)
- 상세 DB 스키마
- 인증 방식 (대시보드 로그인)

## 참고 경로
- 기존 모노레포: `~/00.Projects/00.caffe24/` (폐기 예정, 참고용)
- Cafe24 API 패턴: `00.caffe24/services/connector-cafe24/src/api/cafe24-api.client.ts`
- 이전 논의 문서: `~/.claude/plans/encapsulated-sleeping-stallman.md`
